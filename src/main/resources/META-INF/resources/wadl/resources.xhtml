<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

  <!-- INTERFACE -->
  <cc:interface>
    <cc:attribute name="wadl" required="true" type="java.lang.String" displayName="The WADL URL. This is a fully qualified URL to the WADL file."/>
    <cc:attribute name="label" required="false" default="Rest Resource" type="java.lang.String" displayName="The resource label"/>
    <cc:attribute name="icon" required="false" default="glyphicon glyphicon-cloud" type="java.lang.String" displayName="A FA icon to display in the header."/>
    <cc:attribute name="defaultResource" required="false" default="Default" type="java.lang.String" displayName="The default resource label to use when none is provided in the WADL."/>
  </cc:interface>

  <!--Place in a Bootstrap Menu-->
  <!-- IMPLEMENTATION -->
  <cc:implementation>
    <li><a href="#"><i class="#{cc.attrs.icon} fa-fw"></i> #{cc.attrs.label} <span class="fa arrow"></span></a>
      <ul class="nav nav-second-level">
        <ui:repeat value="#{wadlBean.findApplication(cc.attrs.wadl).baseResource.resource}" var="res">
          <li>
            <h:link outcome="webservice.xhtml" styleClass="text-capitalize">
              <f:param name="wadl" value="#{cc.attrs.wadl}"/>
              <f:param name="path" value="#{res.path}"/>
              #{empty res.path ? cc.attrs.defaultResource : res.path}
            </h:link>
          </li>
        </ui:repeat>
      </ul>
    </li>
  </cc:implementation>
</html>